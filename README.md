# 人事勤假管理

## todo:
 - [] 导出统计结果
 - [] 编辑页面的日期控件问题
 - [] 请假记录页面查询增加日期区间
 - [] 计算自然年年假结余
 - [] 调级触发年假变化，需要增加调剂生效时间
 - [] 手动调整年假需要设定启用时间
 
 
## 年假

``` 
有效时间不满一年的年假计算规则（入职当年、毕业刚满1年的）
起算日期到12月31日的天数，除以365，得到当年的年假比例。再根据所属级别的对应基数，相乘，取整（仅整数部分）得到当年年假。
起算日期以日志日期或毕业满一年日期，二者取其晚者
入职、毕业第二自然年其，年假比例为 100%

年假比例为 r，
年假为 V，
基数为 b，
起算日期为 ds，
结算日期为 de

r = (de - ds)/365
V = round(r * b)

V = round((de - ds) / 365 * b)

1. 未转正 
   V = 0
2. 未毕业满一年
   V = 0
3. 毕业满一年且已转正 起算日期
  3.1 入职日期与毕业满一年日期取其晚者为 ds （起算日期）
  3.2 入职日期与毕业日期均不在计算当年 ds=1月1日
4. 满足计算年的，结算日期
  4.1 发生离职，结算日期 de = 离职日期
  4.2 正常，结算日期 de = 12月31日
5. 其他情况，有特殊设定的，年假基数按设定取。

```

